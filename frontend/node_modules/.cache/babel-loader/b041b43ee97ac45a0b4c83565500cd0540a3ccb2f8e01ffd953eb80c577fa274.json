{"ast":null,"code":"import{useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate,useLocation}from'react-router-dom';import Sidebar from'./components/Sidebar';import Header from'./components/Header';import Home from'./pages/Home';import Login from'./pages/Login';import Logout from'./pages/Logout';import PrivateRoute from'./routes/PrivateRoute';import Kanban from'./pages/Kanban';import Tarefas from'./pages/Tarefas';import IntegraContador from'./pages/IntegraContador';import Dctfweb from'./pages/Dctfweb';// ✅ correto\nimport Dividas from'./pages/Dividas';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LayoutWrapper=_ref=>{let{children}=_ref;const location=useLocation();const hideHeaderRoutes=['/login','/kanban','/tarefas','/IntegraContador','/Dctfweb','/Dividas'];const isHeaderHidden=hideHeaderRoutes.includes(location.pathname);return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[location.pathname!=='/login'&&/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:location.pathname!=='/login'?'6rem':'0',padding:'2rem',width:'100%'},children:[!isHeaderHidden&&/*#__PURE__*/_jsx(Header,{}),children]})]});};function App(){useEffect(()=>{const interval=setInterval(async()=>{const refreshToken=localStorage.getItem('refresh');if(!refreshToken)return;try{const response=await fetch(`${process.env.REACT_APP_API_BASE}/api/token/refresh/`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({refresh:refreshToken})});if(!response.ok){console.warn(`Falha ao renovar token (status: ${response.status})`);localStorage.removeItem('access');localStorage.removeItem('refresh');window.location.href='/login';return;}const data=await response.json();if(data.access){localStorage.setItem('access',data.access);}}catch(error){console.error('Erro ao tentar renovar token:',error);localStorage.removeItem('access');localStorage.removeItem('refresh');window.location.href='/login';}},4*60*1000);// a cada 4 minutos\nreturn()=>clearInterval(interval);},[]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(LayoutWrapper,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/logout\",element:/*#__PURE__*/_jsx(Logout,{})}),/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(PrivateRoute,{}),children:[/*#__PURE__*/_jsx(Route,{path:\"/home\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/kanban\",element:/*#__PURE__*/_jsx(Kanban,{})}),/*#__PURE__*/_jsx(Route,{path:\"/tarefas\",element:/*#__PURE__*/_jsx(Tarefas,{})}),/*#__PURE__*/_jsx(Route,{path:\"/IntegraContador\",element:/*#__PURE__*/_jsx(IntegraContador,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Dctfweb\",element:/*#__PURE__*/_jsx(Dctfweb,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Dividas\",element:/*#__PURE__*/_jsx(Dividas,{})})]})]})})});}export default App;","map":{"version":3,"names":["useEffect","BrowserRouter","Router","Routes","Route","Navigate","useLocation","Sidebar","Header","Home","Login","Logout","PrivateRoute","Kanban","Tarefas","IntegraContador","Dctfweb","Dividas","jsx","_jsx","jsxs","_jsxs","LayoutWrapper","_ref","children","location","hideHeaderRoutes","isHeaderHidden","includes","pathname","style","display","marginLeft","padding","width","App","interval","setInterval","refreshToken","localStorage","getItem","response","fetch","process","env","REACT_APP_API_BASE","method","headers","body","JSON","stringify","refresh","ok","console","warn","status","removeItem","window","href","data","json","access","setItem","error","clearInterval","path","element","to","replace"],"sources":["C:/Users/elean/salvar_comece/frontend/src/App.js"],"sourcesContent":["import { useEffect } from 'react';\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n  Navigate,\n  useLocation,\n} from 'react-router-dom';\nimport Sidebar from './components/Sidebar';\nimport Header from './components/Header';\nimport Home from './pages/Home';\nimport Login from './pages/Login';\nimport Logout from './pages/Logout';\nimport PrivateRoute from './routes/PrivateRoute';\nimport Kanban from './pages/Kanban';\nimport Tarefas from './pages/Tarefas';\nimport IntegraContador from './pages/IntegraContador';\nimport Dctfweb from './pages/Dctfweb'; // ✅ correto\nimport Dividas from './pages/Dividas';\n\n\nconst LayoutWrapper = ({ children }) => {\n  const location = useLocation();\n  const hideHeaderRoutes = ['/login', '/kanban', '/tarefas', '/IntegraContador','/Dctfweb','/Dividas'];\n  const isHeaderHidden = hideHeaderRoutes.includes(location.pathname);\n\n  return (\n    <div style={{ display: 'flex' }}>\n      {location.pathname !== '/login' && <Sidebar />}\n      <div\n        style={{\n          marginLeft: location.pathname !== '/login' ? '6rem' : '0',\n          padding: '2rem',\n          width: '100%',\n        }}\n      >\n        {!isHeaderHidden && <Header />}\n        {children}\n      </div>\n    </div>\n  );\n};\n\nfunction App() {\n  useEffect(() => {\n    const interval = setInterval(async () => {\n      const refreshToken = localStorage.getItem('refresh');\n\n      if (!refreshToken) return;\n\n      try {\n        const response = await fetch(`${process.env.REACT_APP_API_BASE}/api/token/refresh/`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ refresh: refreshToken }),\n        });\n\n        if (!response.ok) {\n          console.warn(`Falha ao renovar token (status: ${response.status})`);\n          localStorage.removeItem('access');\n          localStorage.removeItem('refresh');\n          window.location.href = '/login';\n          return;\n        }\n\n        const data = await response.json();\n        if (data.access) {\n          localStorage.setItem('access', data.access);\n        }\n      } catch (error) {\n        console.error('Erro ao tentar renovar token:', error);\n        localStorage.removeItem('access');\n        localStorage.removeItem('refresh');\n        window.location.href = '/login';\n      }\n    }, 4 * 60 * 1000); // a cada 4 minutos\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <Router>\n      <LayoutWrapper>\n        <Routes>\n          <Route path=\"/\" element={<Navigate to=\"/login\" replace />} />\n          <Route path=\"/login\" element={<Login />} />\n          <Route path=\"/logout\" element={<Logout />} />\n          <Route element={<PrivateRoute />}>\n            <Route path=\"/home\" element={<Home />} />\n            <Route path=\"/kanban\" element={<Kanban />} />\n            <Route path=\"/tarefas\" element={<Tarefas />} />\n            <Route path=\"/IntegraContador\" element={<IntegraContador />} />\n            <Route path=\"/Dctfweb\" element={<Dctfweb />} />\n            <Route path=\"/Dividas\" element={<Dividas />} />\n\n          </Route>\n        </Routes>\n      </LayoutWrapper>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}