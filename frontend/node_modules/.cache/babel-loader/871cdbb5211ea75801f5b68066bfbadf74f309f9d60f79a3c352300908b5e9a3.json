{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import axios from'axios';import'bootstrap/dist/css/bootstrap.min.css';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'../styles/dividas.css';// Modal para visualizar e editar e-mail antes de enviar\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const EmailPreviewModal=_ref=>{let{show,handleClose,emailData,handleSendEmail}=_ref;const[destinatario,setDestinatario]=useState('');// Email fixo em cópia\nconst emailCopia='fiscal@gerencialconsultoria.com.br';const[assunto,setAssunto]=useState('DIVIDAS PENDENTES');const[corpoHtml,setCorpoHtml]=useState('');useEffect(()=>{if(emailData){// Gerar tabela de dívidas HTML\nlet dividasHtml=`\n        <table border=\"1\" cellpadding=\"8\" cellspacing=\"0\" style=\"border-collapse: collapse; width: 100%;\">\n          <thead style=\"background-color: #f0f0f0;\">\n            <tr>\n              <th>Código</th>\n              <th>Período</th>\n              <th>Valor</th>\n              <th>Vencimento</th>\n              <th>Situação</th>\n            </tr>\n          </thead>\n          <tbody>\n      `;emailData.dividas.forEach(divida=>{const valorFormatado=new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(divida.saldo_devedor);dividasHtml+=`\n          <tr>\n            <td>${divida.codigo}</td>\n            <td>${divida.periodo}</td>\n            <td style=\"text-align: right;\">${valorFormatado}</td>\n            <td>${divida.vencimento}</td>\n            <td>${divida.situacao}</td>\n          </tr>\n        `;});dividasHtml+=`\n          </tbody>\n        </table>\n      `;// Formatar valor total\nconst totalFormatado=new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(emailData.total_dividas);// Usar URL pública para o logo\nconst logoUrl='https://comecehub.com.br/wp-content/uploads/2021/05/logoemail.png';// Criar corpo do e-mail completo\nconst corpo=`\n      <html>\n      <head>\n          <meta charset=\"UTF-8\">\n          <style>\n              body {\n                  font-family: Arial, sans-serif;\n                  font-size: 16px;\n                  color: #333;\n                  background-color: #f9f9f9;\n                  padding: 20px;\n              }\n              h2 {\n                  color: #0073e6;\n              }\n              .header {\n                  margin-bottom: 20px;\n              }\n              .table-container {\n                  margin: 20px 0;\n              }\n              .summary {\n                  background-color: #f0f0f0;\n                  padding: 10px;\n                  border-radius: 5px;\n                  margin-bottom: 20px;\n              }\n              .footer {\n                  margin-top: 30px;\n                  border-top: 1px solid #ddd;\n                  padding-top: 15px;\n              }\n          </style>\n      </head>\n      \n      <body>\n          <div class=\"header\">\n              <p>Olá ${emailData.empresa},</p>\n              <p>Estamos entrando em contato para informar sobre as pendências tributárias identificadas nos sistemas da Receita Federal, através de consulta à Situação Fiscal.</p>\n          </div>\n          \n          <div class=\"summary\">\n              <p><strong>CNPJ:</strong> ${emailData.cnpj}</p>\n              <p><strong>Total Pendente:</strong> ${totalFormatado}</p>\n              <p><strong>Quantidade de Dívidas:</strong> ${emailData.dividas.length}</p>\n          </div>\n          \n          <h3>Detalhamento das Dívidas:</h3>\n          <div class=\"table-container\">\n              ${dividasHtml}\n          </div>\n          \n          <p>As pendências em questão, se não forem quitadas ou parceladas, sofrem correção monetária diariamente, aumentando o passivo financeiro da empresa.</p>\n          \n          <p>Caso já tenha efetuado o pagamento, por favor desconsidere esta mensagem ou nos envie o comprovante para atualizações em nosso sistema.</p>\n          <p>Se precisar de informações mais detalhadas ou falar a respeito de opções de parcelamentos, entre em contato com o nosso time através do email fiscal@gerencialconsultoria.com.br.</p>\n\n          <div class=\"footer\">\n              <p>Qualquer dúvida, estou à disposição.</p>\n              <p>Atenciosamente,</p>\n              <img src=\"${logoUrl}\" alt=\"Logo Comece\" style=\"width: 300px; height: auto; display: block; margin: 0;\">\n          </div>\n      </body>\n      </html>\n      `;setCorpoHtml(corpo);}},[emailData]);return/*#__PURE__*/_jsxs(\"div\",{className:\"modal show d-block\",tabIndex:\"-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:\"Pr\\xE9-visualiza\\xE7\\xE3o de E-mail\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:handleClose})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"destinatario\",className:\"form-label\",children:\"Destinat\\xE1rio:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"destinatario\",value:destinatario,onChange:e=>setDestinatario(e.target.value),placeholder:\"email@empresa.com\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"emailCopia\",className:\"form-label\",children:\"E-mail em C\\xF3pia (CC):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"emailCopia\",value:emailCopia,disabled:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"assunto\",className:\"form-label\",children:\"Assunto:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"assunto\",value:assunto,onChange:e=>setAssunto(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Conte\\xFAdo:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border p-3\",style:{height:'400px',overflowY:'auto'},dangerouslySetInnerHTML:{__html:corpoHtml}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleClose,children:\"Cancelar\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:()=>handleSendEmail(destinatario,emailCopia,assunto,corpoHtml),disabled:!destinatario,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-paper-plane me-2\"}),\"Enviar E-mail\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop show\",onClick:handleClose})]});};// Componente do modal para clientes com dívidas no mês atual\nconst ClientesComDividaMes=_ref2=>{let{show,handleClose,dividas}=_ref2;// Estado para controlar a expansão das linhas\nconst[expandedRows,setExpandedRows]=useState({});const[showEmailModal,setShowEmailModal]=useState(false);const[selectedClienteEmail,setSelectedClienteEmail]=useState(null);// Estado para rastrear os emails enviados\nconst[emailsEnviados,setEmailsEnviados]=useState({});// Recuperar informações de emails enviados do localStorage na inicialização\nuseEffect(()=>{const savedEmails=localStorage.getItem('emailsDividasEnviados');if(savedEmails){try{setEmailsEnviados(JSON.parse(savedEmails));}catch(e){console.error(\"Erro ao carregar emails enviados:\",e);}}},[]);// Filtra e agrupa clientes com dívidas no mês atual\nconst clientesAgrupados=useMemo(()=>{if(!dividas||dividas.length===0)return[];// 1. Converte todas as datas para objetos Date\nconst datasValidas=dividas.filter(divida=>divida.data_registro).map(divida=>{const[dia,mes,ano]=divida.data_registro.split('/');return new Date(ano,mes-1,dia);});// 2. Pega a data mais recente\nconst ultimaData=datasValidas.sort((a,b)=>b-a)[0];// 3. Formata a data de volta para 'dd/mm/yyyy'\nconst formatarData=data=>{const dia=String(data.getDate()).padStart(2,'0');const mes=String(data.getMonth()+1).padStart(2,'0');const ano=data.getFullYear();return`${dia}/${mes}/${ano}`;};const dataMaisRecente=formatarData(ultimaData);// 4. Filtra apenas dívidas com essa data e situação 'devedor'\nconst dividasFiltradas=dividas.filter(divida=>{var _divida$situacao;return((_divida$situacao=divida.situacao)===null||_divida$situacao===void 0?void 0:_divida$situacao.toLowerCase())==='devedor'&&divida.data_registro===dataMaisRecente;});// 5. Agrupa por CNPJ\nconst clientesMap={};dividasFiltradas.forEach(divida=>{const cnpj=divida.cnpj;if(!clientesMap[cnpj]){clientesMap[cnpj]={cnpj,empresa:divida.empresa,total_dividas:0,dividas:[],situacoes:new Set(),vencimentos:[]};}clientesMap[cnpj].total_dividas+=parseFloat(divida.saldo_devedor||0);clientesMap[cnpj].dividas.push({codigo:divida.codigo,periodo:divida.periodo,saldo_devedor:parseFloat(divida.saldo_devedor||0),vencimento:divida.vencimento,situacao:divida.situacao});clientesMap[cnpj].situacoes.add(divida.situacao);clientesMap[cnpj].vencimentos.push(divida.vencimento);});// 6. Retorna array final agrupado\nreturn Object.values(clientesMap).map(cliente=>{var _datasVencimento$;let situacaoCritica='';if(cliente.situacoes.has('VENCIDA')){situacaoCritica='VENCIDA';}else if(cliente.situacoes.has('A VENCER')){situacaoCritica='A VENCER';}else{situacaoCritica=Array.from(cliente.situacoes).join(', ');}const datasVencimento=cliente.vencimentos.map(v=>{const[dia,mes,ano]=v.split('/');return new Date(ano,mes-1,dia);});datasVencimento.sort((a,b)=>a-b);const proximoVencimento=((_datasVencimento$=datasVencimento[0])===null||_datasVencimento$===void 0?void 0:_datasVencimento$.toLocaleDateString('pt-BR'))||'-';return{...cliente,total_dividas:cliente.total_dividas.toFixed(2),qtd_dividas:cliente.dividas.length,situacao_consolidada:situacaoCritica,proximo_vencimento:proximoVencimento};});},[dividas]);// Função para alternar a expansão\nconst toggleExpand=cnpj=>{setExpandedRows(prev=>({...prev,[cnpj]:!prev[cnpj]}));};// Função para reverter o status de email enviado\nconst reverterStatusEmail=cnpj=>{const novosEmailsEnviados={...emailsEnviados};delete novosEmailsEnviados[cnpj];setEmailsEnviados(novosEmailsEnviados);localStorage.setItem('emailsDividasEnviados',JSON.stringify(novosEmailsEnviados));toast.info('Status de e-mail revertido');};// Funções para email\nconst handlePrepareEmail=cliente=>{setSelectedClienteEmail(cliente);setShowEmailModal(true);};const handleCloseEmailModal=()=>{setShowEmailModal(false);setSelectedClienteEmail(null);};const handleSendEmail=async(destinatario,emailCopia,assunto,corpoHtml)=>{try{const token=localStorage.getItem('access');const response=await axios.post(`${process.env.REACT_APP_API_BASE}/api/enviar-email-dividas/`,{destinatario:destinatario,email_copia:emailCopia,// Adicionando email em cópia\nassunto:assunto,corpo_html:corpoHtml,cliente:selectedClienteEmail.empresa,cnpj:selectedClienteEmail.cnpj},{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});if(response.data.success){toast.success(`E-mail enviado com sucesso para ${destinatario} (CC: ${emailCopia})`);// Atualizar registro de emails enviados\nconst novosEmailsEnviados={...emailsEnviados,[selectedClienteEmail.cnpj]:{enviado:true,data:new Date().toISOString(),destinatario:destinatario,email_copia:emailCopia}};// Atualizar estado e localStorage\nsetEmailsEnviados(novosEmailsEnviados);localStorage.setItem('emailsDividasEnviados',JSON.stringify(novosEmailsEnviados));handleCloseEmailModal();}else{toast.error(`Erro ao enviar e-mail: ${response.data.error}`);}}catch(error){console.error('Erro ao enviar e-mail:',error);toast.error(`Erro ao enviar e-mail: ${error.message}`);}};// Função para exportar para CSV\nconst exportarCSV=()=>{const cabecalho=['CNPJ','Empresa','Total de Dívidas (R$)','Qtd. Dívidas','Próximo Vencimento','Situação'];const linhas=clientesAgrupados.map(cliente=>[cliente.cnpj,`\"${cliente.empresa.replace(/\"/g,'\"\"')}\"`,cliente.total_dividas.replace('.',','),cliente.qtd_dividas,cliente.proximo_vencimento,`\"${cliente.situacao_consolidada.replace(/\"/g,'\"\"')}\"`].join(','));const conteudoCSV=[cabecalho.join(','),...linhas].join('\\n');const blob=new Blob([conteudoCSV],{type:'text/csv;charset=utf-8;'});// Cria link para download\nconst link=document.createElement('a');const url=URL.createObjectURL(blob);link.setAttribute('href',url);link.setAttribute('download',`clientes_dividas_mes_${new Date().toLocaleDateString('pt-BR').replace(/\\//g,'-')}.csv`);link.style.visibility='hidden';document.body.appendChild(link);link.click();document.body.removeChild(link);};if(!show)return null;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal show d-block\",tabIndex:\"-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:\"Clientes com D\\xEDvidas no M\\xEAs Atual\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-close\",onClick:handleClose})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:clientesAgrupados.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-info\",children:\"N\\xE3o h\\xE1 clientes com d\\xEDvidas para o m\\xEAs atual.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-exclamation-triangle me-2\"}),\"Encontrados \",clientesAgrupados.length,\" clientes com d\\xEDvidas para o m\\xEAs atual.\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:\"40px\"}}),/*#__PURE__*/_jsx(\"th\",{children:\"CNPJ\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Empresa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Qtd. D\\xEDvidas\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pr\\xF3ximo Venc.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Situa\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(\"th\",{children:\"A\\xE7\\xF5es\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:clientesAgrupados.map(cliente=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{className:getSituacaoClass(cliente.situacao_consolidada),children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-link\",onClick:()=>toggleExpand(cliente.cnpj),children:/*#__PURE__*/_jsx(\"i\",{className:`fas fa-${expandedRows[cliente.cnpj]?'minus':'plus'}-circle`})})}),/*#__PURE__*/_jsx(\"td\",{children:cliente.cnpj}),/*#__PURE__*/_jsx(\"td\",{children:cliente.empresa}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(cliente.total_dividas)}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center\",children:cliente.qtd_dividas}),/*#__PURE__*/_jsx(\"td\",{children:cliente.proximo_vencimento}),/*#__PURE__*/_jsx(\"td\",{children:cliente.situacao_consolidada}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"btn-group\",children:emailsEnviados[cliente.cnpj]?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-success\",title:`E-mail enviado para ${emailsEnviados[cliente.cnpj].destinatario||'cliente'}`,disabled:true,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-secondary\",onClick:()=>reverterStatusEmail(cliente.cnpj),title:\"Reverter status de e-mail\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-undo\"})})]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-primary\",onClick:()=>handlePrepareEmail(cliente),title:\"Enviar e-mail de cobran\\xE7a\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-envelope\"})})})})]}),expandedRows[cliente.cnpj]&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"8\",className:\"p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-light\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Detalhes das D\\xEDvidas\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"C\\xF3digo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Per\\xEDodo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Valor\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Vencimento\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Situa\\xE7\\xE3o\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:cliente.dividas.map((divida,idx)=>/*#__PURE__*/_jsxs(\"tr\",{className:getSituacaoClass(divida.situacao),children:[/*#__PURE__*/_jsx(\"td\",{children:divida.codigo}),/*#__PURE__*/_jsx(\"td\",{children:divida.periodo}),/*#__PURE__*/_jsx(\"td\",{className:\"text-end\",children:new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(divida.saldo_devedor)}),/*#__PURE__*/_jsx(\"td\",{children:divida.vencimento}),/*#__PURE__*/_jsx(\"td\",{children:divida.situacao})]},idx))})]}),emailsEnviados[cliente.cnpj]&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-success mt-3\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-circle me-2\"}),/*#__PURE__*/_jsxs(\"small\",{children:[\"E-mail enviado para \",emailsEnviados[cliente.cnpj].destinatario,\" em \",new Date(emailsEnviados[cliente.cnpj].data).toLocaleDateString('pt-BR',{hour:'2-digit',minute:'2-digit'}),emailsEnviados[cliente.cnpj].email_copia&&/*#__PURE__*/_jsxs(\"span\",{children:[\" (CC: \",emailsEnviados[cliente.cnpj].email_copia,\")\"]})]})]})]})})})]},cliente.cnpj))})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleClose,children:\"Fechar\"}),clientesAgrupados.length>0&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:exportarCSV,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-download me-2\"}),\"Exportar CSV\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop show\",onClick:handleClose})]}),showEmailModal&&/*#__PURE__*/_jsx(EmailPreviewModal,{show:showEmailModal,handleClose:handleCloseEmailModal,emailData:selectedClienteEmail,handleSendEmail:handleSendEmail})]});};const Dividas=()=>{const[dividas,setDividas]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[atualizando,setAtualizando]=useState(false);const[processamentoInfo,setProcessamentoInfo]=useState(null);// Estados para filtros\nconst[filters,setFilters]=useState({});const[searchTerm,setSearchTerm]=useState('');const[activeFilterColumn,setActiveFilterColumn]=useState(null);const[showModalDividasMes,setShowModalDividasMes]=useState(false);// Mapeamento para nomes mais amigáveis das colunas\nconst columnNames={'cnpj':'CNPJ','empresa':'Empresa','codigo':'Código','periodo':'Período','vencimento':'Vencimento','valor_original':'Valor Original','saldo_devedor':'Saldo Devedor','situacao':'Situação','data_emissao':'Data de Emissão','data_validade':'Data de Validade','total_dividas':'Total de Dívidas','data_registro':'Data de Registro'};const columnsToShow=['cnpj','empresa','codigo','periodo','vencimento','valor_original','saldo_devedor','situacao','data_emissao','data_validade','total_dividas','data_registro'];// Função para atualizar dados (processar PDFs)\nconst atualizarDados=async()=>{try{setAtualizando(true);setProcessamentoInfo(null);// Obter token de autenticação\nconst token=localStorage.getItem('access');// Chamar endpoint para processar PDFs\nconst response=await axios.post(`${process.env.REACT_APP_API_BASE}/api/processar-pdfs/`,{},// corpo vazio\n{headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'}});// Verificar resposta\nif(response.data.success){// Armazenar informações do processamento\nsetProcessamentoInfo({total:response.data.total_processados,semDivida:response.data.pdfs_sem_divida,comDivida:response.data.pdfs_com_divida,comErro:response.data.pdfs_com_erro});// Mostrar toast de sucesso\ntoast.success(`Processamento concluído com sucesso!`);// Atualizar lista de dívidas\nconst dividasResponse=await axios.get(`${process.env.REACT_APP_API_BASE}/api/dividas/`,{headers:{'Authorization':`Bearer ${token}`}});if(dividasResponse.data.success){setDividas(dividasResponse.data.dividas);}}else{// Mostrar erro\ntoast.error('Erro no processamento: '+response.data.error);}}catch(error){var _error$response,_error$response$data;console.error('Erro na atualização:',error);toast.error('Erro ao atualizar dados: '+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||error.message));}finally{setAtualizando(false);}};// Buscar dados\nuseEffect(()=>{const fetchDividas=async()=>{try{const token=localStorage.getItem('access');const response=await axios.get(`${process.env.REACT_APP_API_BASE}/api/dividas/`,{headers:{'Authorization':`Bearer ${token}`}});if(response.data.success){setDividas(response.data.dividas);setLoading(false);}}catch(err){setError(err.message);setLoading(false);}};fetchDividas();},[]);// Fechar o dropdown quando clicar fora\nuseEffect(()=>{const handleClickOutside=e=>{if(activeFilterColumn&&!e.target.closest('.filter-dropdown')){setActiveFilterColumn(null);}};document.addEventListener('click',handleClickOutside);return()=>document.removeEventListener('click',handleClickOutside);},[activeFilterColumn]);// Formatação de moeda\nconst formatCurrency=value=>{if(value===null||value===undefined||value==='')return'-';return new Intl.NumberFormat('pt-BR',{style:'currency',currency:'BRL'}).format(value);};// Filtrar dados\nconst filteredDividas=useMemo(()=>{let result=dividas;// Filtro de busca global\nif(searchTerm){result=result.filter(divida=>Object.values(divida).some(val=>String(val).toLowerCase().includes(searchTerm.toLowerCase())));}// Filtros específicos por coluna\nObject.keys(filters).forEach(key=>{if(filters[key]){result=result.filter(divida=>String(divida[key]).toLowerCase().includes(filters[key].toLowerCase()));}});return result;},[dividas,filters,searchTerm]);// Toggle filter dropdown\nconst toggleFilterDropdown=(column,e)=>{e.stopPropagation();setActiveFilterColumn(activeFilterColumn===column?null:column);};// Renderização de filtros\nconst renderColumnFilter=column=>{return/*#__PURE__*/_jsx(\"div\",{className:`filter-dropdown-menu ${activeFilterColumn===column?'show':''}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm mb-2\",placeholder:\"Filtrar...\",value:filters[column]||'',onChange:e=>setFilters(prev=>({...prev,[column]:e.target.value})),onClick:e=>e.stopPropagation()}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-options\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-primary w-100 mb-2\",onClick:e=>{e.stopPropagation();setFilters(prev=>{const newFilters={...prev};delete newFilters[column];return newFilters;});},children:\"Limpar Filtro\"})})]})});};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center my-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-primary\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Carregando...\"})})});if(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-danger my-4\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"alert-heading\",children:\"Erro!\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mt-4\",children:[/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\",autoClose:5000}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-wrapper position-relative\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-invoice-dollar header-icon\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"titulo-pagina\",children:\"Pend\\xEAncias Fiscais\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 d-flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success mb-3\",onClick:atualizarDados,disabled:atualizando,children:atualizando?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\",role:\"status\",\"aria-hidden\":\"true\"}),\"Processando PDFs...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sync me-2\"}),\"Atualizar Dados\"]})}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-warning mb-3\",onClick:()=>setShowModalDividasMes(true),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-calendar-day me-2\"}),\"Clientes com D\\xEDvidas neste M\\xEAs\"]})]})}),processamentoInfo&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-info\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-info-circle me-2\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Resultado do processamento:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ms-2\",children:[\"Total de PDFs processados: \",processamentoInfo.total]}),/*#__PURE__*/_jsx(\"span\",{className:\"ms-2\",children:\"|\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ms-2\",children:[\"Sem d\\xEDvidas: \",processamentoInfo.semDivida]}),/*#__PURE__*/_jsx(\"span\",{className:\"ms-2\",children:\"|\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ms-2\",children:[\"Com d\\xEDvidas: \",processamentoInfo.comDivida]}),/*#__PURE__*/_jsx(\"span\",{className:\"ms-2\",children:\"|\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ms-2\",children:[\"Com erro: \",processamentoInfo.comErro]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Busca global...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary\",type:\"button\",onClick:()=>setSearchTerm(''),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-end align-items-center\",children:Object.keys(filters).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"active-filters\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted me-2\",children:\"Filtros ativos:\"}),Object.keys(filters).map(key=>/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-info text-dark me-1\",children:[columnNames[key],\": \",filters[key],/*#__PURE__*/_jsx(\"button\",{className:\"btn-close btn-close-white ms-1\",style:{fontSize:'0.5rem'},onClick:()=>setFilters(prev=>{const newFilters={...prev};delete newFilters[key];return newFilters;})})]},key)),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-outline-secondary ms-2\",onClick:()=>setFilters({}),children:\"Limpar todos\"})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:columnsToShow.map(column=>/*#__PURE__*/_jsx(\"th\",{className:\"text-center column-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-center column-title\",children:[/*#__PURE__*/_jsx(\"span\",{children:columnNames[column]||column}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-icon-btn ms-1\",onClick:e=>toggleFilterDropdown(column,e),title:`Filtrar por ${columnNames[column]||column}`,children:/*#__PURE__*/_jsx(\"i\",{className:`fas fa-filter ${filters[column]?'text-primary':'text-muted'}`})}),renderColumnFilter(column)]})},column))})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredDividas.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:columnsToShow.length,className:\"text-center\",children:\"Nenhuma d\\xEDvida encontrada\"})}):filteredDividas.map((divida,index)=>/*#__PURE__*/_jsx(\"tr\",{children:columnsToShow.map(key=>/*#__PURE__*/_jsx(\"td\",{className:`\n                            text-center \n                            ${key==='situacao'?getSituacaoClass(divida.situacao):''} \n                            ${isCurrencyColumn(key)?'text-end':''}\n                          `,children:isCurrencyColumn(key)?formatCurrency(divida[key]):divida[key]||'-'},key))},index))})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"Total de registros: \",filteredDividas.length]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted\",children:[\"\\xDAltima atualiza\\xE7\\xE3o: \",dividas.length>0?dividas[0].data_consulta:'-']})]})})]}),/*#__PURE__*/_jsx(ClientesComDividaMes,{show:showModalDividasMes,handleClose:()=>setShowModalDividasMes(false),dividas:dividas})]});};// Funções de classificação\nconst getSituacaoClass=situacao=>{if(!situacao)return'';const situacaoLowerCase=situacao.toLowerCase();if(situacaoLowerCase.includes('sem divida')||situacaoLowerCase.includes('confirmado')){return'table-success';}else if(situacaoLowerCase.includes('a vencer')||situacaoLowerCase.includes('analisar')){return'table-warning';}else if(situacaoLowerCase.includes('devedor')){return'table-danger';}return'';};const isCurrencyColumn=columnName=>{return['valor_original','saldo_devedor','total_dividas'].includes(columnName);};export default Dividas;","map":{"version":3,"names":["React","useState","useEffect","useMemo","axios","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EmailPreviewModal","_ref","show","handleClose","emailData","handleSendEmail","destinatario","setDestinatario","emailCopia","assunto","setAssunto","corpoHtml","setCorpoHtml","dividasHtml","dividas","forEach","divida","valorFormatado","Intl","NumberFormat","style","currency","format","saldo_devedor","codigo","periodo","vencimento","situacao","totalFormatado","total_dividas","logoUrl","corpo","empresa","cnpj","length","className","tabIndex","children","type","onClick","htmlFor","id","value","onChange","e","target","placeholder","disabled","height","overflowY","dangerouslySetInnerHTML","__html","ClientesComDividaMes","_ref2","expandedRows","setExpandedRows","showEmailModal","setShowEmailModal","selectedClienteEmail","setSelectedClienteEmail","emailsEnviados","setEmailsEnviados","savedEmails","localStorage","getItem","JSON","parse","console","error","clientesAgrupados","datasValidas","filter","data_registro","map","dia","mes","ano","split","Date","ultimaData","sort","a","b","formatarData","data","String","getDate","padStart","getMonth","getFullYear","dataMaisRecente","dividasFiltradas","_divida$situacao","toLowerCase","clientesMap","situacoes","Set","vencimentos","parseFloat","push","add","Object","values","cliente","_datasVencimento$","situacaoCritica","has","Array","from","join","datasVencimento","v","proximoVencimento","toLocaleDateString","toFixed","qtd_dividas","situacao_consolidada","proximo_vencimento","toggleExpand","prev","reverterStatusEmail","novosEmailsEnviados","setItem","stringify","info","handlePrepareEmail","handleCloseEmailModal","token","response","post","process","env","REACT_APP_API_BASE","email_copia","corpo_html","headers","success","enviado","toISOString","message","exportarCSV","cabecalho","linhas","replace","conteudoCSV","blob","Blob","link","document","createElement","url","URL","createObjectURL","setAttribute","visibility","body","appendChild","click","removeChild","width","getSituacaoClass","title","colSpan","idx","hour","minute","Dividas","setDividas","loading","setLoading","setError","atualizando","setAtualizando","processamentoInfo","setProcessamentoInfo","filters","setFilters","searchTerm","setSearchTerm","activeFilterColumn","setActiveFilterColumn","showModalDividasMes","setShowModalDividasMes","columnNames","columnsToShow","atualizarDados","total","total_processados","semDivida","pdfs_sem_divida","comDivida","pdfs_com_divida","comErro","pdfs_com_erro","dividasResponse","get","_error$response","_error$response$data","fetchDividas","err","handleClickOutside","closest","addEventListener","removeEventListener","formatCurrency","undefined","filteredDividas","result","some","val","includes","keys","key","toggleFilterDropdown","column","stopPropagation","renderColumnFilter","newFilters","role","position","autoClose","fontSize","index","isCurrencyColumn","data_consulta","situacaoLowerCase","columnName"],"sources":["C:/Users/elean/salvar_comece/frontend/src/pages/Dividas.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport axios from 'axios';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport '../styles/dividas.css';\n\n// Modal para visualizar e editar e-mail antes de enviar\nconst EmailPreviewModal = ({ show, handleClose, emailData, handleSendEmail }) => {\n  const [destinatario, setDestinatario] = useState('');\n  // Email fixo em cópia\n  const emailCopia = 'fiscal@gerencialconsultoria.com.br';\n  const [assunto, setAssunto] = useState('DIVIDAS PENDENTES');\n  const [corpoHtml, setCorpoHtml] = useState('');\n  \n  useEffect(() => {\n    if (emailData) {\n      // Gerar tabela de dívidas HTML\n      let dividasHtml = `\n        <table border=\"1\" cellpadding=\"8\" cellspacing=\"0\" style=\"border-collapse: collapse; width: 100%;\">\n          <thead style=\"background-color: #f0f0f0;\">\n            <tr>\n              <th>Código</th>\n              <th>Período</th>\n              <th>Valor</th>\n              <th>Vencimento</th>\n              <th>Situação</th>\n            </tr>\n          </thead>\n          <tbody>\n      `;\n      \n      emailData.dividas.forEach(divida => {\n        const valorFormatado = new Intl.NumberFormat('pt-BR', {\n          style: 'currency',\n          currency: 'BRL'\n        }).format(divida.saldo_devedor);\n        \n        dividasHtml += `\n          <tr>\n            <td>${divida.codigo}</td>\n            <td>${divida.periodo}</td>\n            <td style=\"text-align: right;\">${valorFormatado}</td>\n            <td>${divida.vencimento}</td>\n            <td>${divida.situacao}</td>\n          </tr>\n        `;\n      });\n      \n      dividasHtml += `\n          </tbody>\n        </table>\n      `;\n      \n      // Formatar valor total\n      const totalFormatado = new Intl.NumberFormat('pt-BR', {\n        style: 'currency',\n        currency: 'BRL'\n      }).format(emailData.total_dividas);\n      \n      // Usar URL pública para o logo\n      const logoUrl = 'https://comecehub.com.br/wp-content/uploads/2021/05/logoemail.png';\n      \n      // Criar corpo do e-mail completo\n      const corpo = `\n      <html>\n      <head>\n          <meta charset=\"UTF-8\">\n          <style>\n              body {\n                  font-family: Arial, sans-serif;\n                  font-size: 16px;\n                  color: #333;\n                  background-color: #f9f9f9;\n                  padding: 20px;\n              }\n              h2 {\n                  color: #0073e6;\n              }\n              .header {\n                  margin-bottom: 20px;\n              }\n              .table-container {\n                  margin: 20px 0;\n              }\n              .summary {\n                  background-color: #f0f0f0;\n                  padding: 10px;\n                  border-radius: 5px;\n                  margin-bottom: 20px;\n              }\n              .footer {\n                  margin-top: 30px;\n                  border-top: 1px solid #ddd;\n                  padding-top: 15px;\n              }\n          </style>\n      </head>\n      \n      <body>\n          <div class=\"header\">\n              <p>Olá ${emailData.empresa},</p>\n              <p>Estamos entrando em contato para informar sobre as pendências tributárias identificadas nos sistemas da Receita Federal, através de consulta à Situação Fiscal.</p>\n          </div>\n          \n          <div class=\"summary\">\n              <p><strong>CNPJ:</strong> ${emailData.cnpj}</p>\n              <p><strong>Total Pendente:</strong> ${totalFormatado}</p>\n              <p><strong>Quantidade de Dívidas:</strong> ${emailData.dividas.length}</p>\n          </div>\n          \n          <h3>Detalhamento das Dívidas:</h3>\n          <div class=\"table-container\">\n              ${dividasHtml}\n          </div>\n          \n          <p>As pendências em questão, se não forem quitadas ou parceladas, sofrem correção monetária diariamente, aumentando o passivo financeiro da empresa.</p>\n          \n          <p>Caso já tenha efetuado o pagamento, por favor desconsidere esta mensagem ou nos envie o comprovante para atualizações em nosso sistema.</p>\n          <p>Se precisar de informações mais detalhadas ou falar a respeito de opções de parcelamentos, entre em contato com o nosso time através do email fiscal@gerencialconsultoria.com.br.</p>\n\n          <div class=\"footer\">\n              <p>Qualquer dúvida, estou à disposição.</p>\n              <p>Atenciosamente,</p>\n              <img src=\"${logoUrl}\" alt=\"Logo Comece\" style=\"width: 300px; height: auto; display: block; margin: 0;\">\n          </div>\n      </body>\n      </html>\n      `;\n      \n      setCorpoHtml(corpo);\n    }\n  }, [emailData]);\n\n  return (\n    <div className=\"modal show d-block\" tabIndex=\"-1\">\n      <div className=\"modal-dialog modal-lg\">\n        <div className=\"modal-content\">\n          <div className=\"modal-header\">\n            <h5 className=\"modal-title\">Pré-visualização de E-mail</h5>\n            <button type=\"button\" className=\"btn-close\" onClick={handleClose}></button>\n          </div>\n          <div className=\"modal-body\">\n            <div className=\"mb-3\">\n              <label htmlFor=\"destinatario\" className=\"form-label\">Destinatário:</label>\n              <input \n                type=\"email\" \n                className=\"form-control\" \n                id=\"destinatario\" \n                value={destinatario} \n                onChange={(e) => setDestinatario(e.target.value)}\n                placeholder=\"email@empresa.com\"\n              />\n            </div>\n            <div className=\"mb-3\">\n              <label htmlFor=\"emailCopia\" className=\"form-label\">E-mail em Cópia (CC):</label>\n              <input \n                type=\"email\" \n                className=\"form-control\" \n                id=\"emailCopia\" \n                value={emailCopia} \n                disabled\n              />\n            </div>\n            <div className=\"mb-3\">\n              <label htmlFor=\"assunto\" className=\"form-label\">Assunto:</label>\n              <input \n                type=\"text\" \n                className=\"form-control\" \n                id=\"assunto\" \n                value={assunto} \n                onChange={(e) => setAssunto(e.target.value)}\n              />\n            </div>\n            <div className=\"mb-3\">\n              <label className=\"form-label\">Conteúdo:</label>\n              <div \n                className=\"border p-3\" \n                style={{height: '400px', overflowY: 'auto'}}\n                dangerouslySetInnerHTML={{ __html: corpoHtml }}\n              ></div>\n            </div>\n          </div>\n          <div className=\"modal-footer\">\n            <button type=\"button\" className=\"btn btn-secondary\" onClick={handleClose}>Cancelar</button>\n            <button \n              type=\"button\" \n              className=\"btn btn-primary\"\n              onClick={() => handleSendEmail(destinatario, emailCopia, assunto, corpoHtml)}\n              disabled={!destinatario}\n            >\n              <i className=\"fas fa-paper-plane me-2\"></i>\n              Enviar E-mail\n            </button>\n          </div>\n        </div>\n      </div>\n      <div className=\"modal-backdrop show\" onClick={handleClose}></div>\n    </div>\n  );\n};\n\n// Componente do modal para clientes com dívidas no mês atual\nconst ClientesComDividaMes = ({ show, handleClose, dividas }) => {\n  // Estado para controlar a expansão das linhas\n  const [expandedRows, setExpandedRows] = useState({});\n  const [showEmailModal, setShowEmailModal] = useState(false);\n  const [selectedClienteEmail, setSelectedClienteEmail] = useState(null);\n  // Estado para rastrear os emails enviados\n  const [emailsEnviados, setEmailsEnviados] = useState({});\n  \n  // Recuperar informações de emails enviados do localStorage na inicialização\n  useEffect(() => {\n    const savedEmails = localStorage.getItem('emailsDividasEnviados');\n    if (savedEmails) {\n      try {\n        setEmailsEnviados(JSON.parse(savedEmails));\n      } catch (e) {\n        console.error(\"Erro ao carregar emails enviados:\", e);\n      }\n    }\n  }, []);\n  \n  // Filtra e agrupa clientes com dívidas no mês atual\n  const clientesAgrupados = useMemo(() => {\n    if (!dividas || dividas.length === 0) return [];\n\n    // 1. Converte todas as datas para objetos Date\n    const datasValidas = dividas\n      .filter(divida => divida.data_registro)\n      .map(divida => {\n        const [dia, mes, ano] = divida.data_registro.split('/');\n        return new Date(ano, mes - 1, dia);\n      });\n\n    // 2. Pega a data mais recente\n    const ultimaData = datasValidas.sort((a, b) => b - a)[0];\n\n    // 3. Formata a data de volta para 'dd/mm/yyyy'\n    const formatarData = (data) => {\n      const dia = String(data.getDate()).padStart(2, '0');\n      const mes = String(data.getMonth() + 1).padStart(2, '0');\n      const ano = data.getFullYear();\n      return `${dia}/${mes}/${ano}`;\n    };\n\n    const dataMaisRecente = formatarData(ultimaData);\n\n    // 4. Filtra apenas dívidas com essa data e situação 'devedor'\n    const dividasFiltradas = dividas.filter(divida =>\n      divida.situacao?.toLowerCase() === 'devedor' &&\n      divida.data_registro === dataMaisRecente\n    );\n\n    // 5. Agrupa por CNPJ\n    const clientesMap = {};\n\n    dividasFiltradas.forEach(divida => {\n      const cnpj = divida.cnpj;\n\n      if (!clientesMap[cnpj]) {\n        clientesMap[cnpj] = {\n          cnpj,\n          empresa: divida.empresa,\n          total_dividas: 0,\n          dividas: [],\n          situacoes: new Set(),\n          vencimentos: []\n        };\n      }\n\n      clientesMap[cnpj].total_dividas += parseFloat(divida.saldo_devedor || 0);\n      clientesMap[cnpj].dividas.push({\n        codigo: divida.codigo,\n        periodo: divida.periodo,\n        saldo_devedor: parseFloat(divida.saldo_devedor || 0),\n        vencimento: divida.vencimento,\n        situacao: divida.situacao\n      });\n      clientesMap[cnpj].situacoes.add(divida.situacao);\n      clientesMap[cnpj].vencimentos.push(divida.vencimento);\n    });\n\n    // 6. Retorna array final agrupado\n    return Object.values(clientesMap).map(cliente => {\n      let situacaoCritica = '';\n      if (cliente.situacoes.has('VENCIDA')) {\n        situacaoCritica = 'VENCIDA';\n      } else if (cliente.situacoes.has('A VENCER')) {\n        situacaoCritica = 'A VENCER';\n      } else {\n        situacaoCritica = Array.from(cliente.situacoes).join(', ');\n      }\n\n      const datasVencimento = cliente.vencimentos.map(v => {\n        const [dia, mes, ano] = v.split('/');\n        return new Date(ano, mes - 1, dia);\n      });\n      datasVencimento.sort((a, b) => a - b);\n      const proximoVencimento = datasVencimento[0]?.toLocaleDateString('pt-BR') || '-';\n\n      return {\n        ...cliente,\n        total_dividas: cliente.total_dividas.toFixed(2),\n        qtd_dividas: cliente.dividas.length,\n        situacao_consolidada: situacaoCritica,\n        proximo_vencimento: proximoVencimento\n      };\n    });\n  }, [dividas]);\n\n  // Função para alternar a expansão\n  const toggleExpand = (cnpj) => {\n    setExpandedRows(prev => ({\n      ...prev,\n      [cnpj]: !prev[cnpj]\n    }));\n  };\n\n  // Função para reverter o status de email enviado\n  const reverterStatusEmail = (cnpj) => {\n    const novosEmailsEnviados = { ...emailsEnviados };\n    delete novosEmailsEnviados[cnpj];\n    \n    setEmailsEnviados(novosEmailsEnviados);\n    localStorage.setItem('emailsDividasEnviados', JSON.stringify(novosEmailsEnviados));\n    toast.info('Status de e-mail revertido');\n  };\n\n  // Funções para email\n  const handlePrepareEmail = (cliente) => {\n    setSelectedClienteEmail(cliente);\n    setShowEmailModal(true);\n  };\n\n  const handleCloseEmailModal = () => {\n    setShowEmailModal(false);\n    setSelectedClienteEmail(null);\n  };\n\n  const handleSendEmail = async (destinatario, emailCopia, assunto, corpoHtml) => {\n    try {\n      const token = localStorage.getItem('access');\n      const response = await axios.post(\n        `${process.env.REACT_APP_API_BASE}/api/enviar-email-dividas/`, \n        {\n          destinatario: destinatario,\n          email_copia: emailCopia,  // Adicionando email em cópia\n          assunto: assunto,\n          corpo_html: corpoHtml,\n          cliente: selectedClienteEmail.empresa,\n          cnpj: selectedClienteEmail.cnpj\n        },\n        {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n\n      if (response.data.success) {\n        toast.success(`E-mail enviado com sucesso para ${destinatario} (CC: ${emailCopia})`);\n        \n        // Atualizar registro de emails enviados\n        const novosEmailsEnviados = {\n          ...emailsEnviados,\n          [selectedClienteEmail.cnpj]: {\n            enviado: true,\n            data: new Date().toISOString(),\n            destinatario: destinatario,\n            email_copia: emailCopia\n          }\n        };\n        \n        // Atualizar estado e localStorage\n        setEmailsEnviados(novosEmailsEnviados);\n        localStorage.setItem('emailsDividasEnviados', JSON.stringify(novosEmailsEnviados));\n        \n        handleCloseEmailModal();\n      } else {\n        toast.error(`Erro ao enviar e-mail: ${response.data.error}`);\n      }\n    } catch (error) {\n      console.error('Erro ao enviar e-mail:', error);\n      toast.error(`Erro ao enviar e-mail: ${error.message}`);\n    }\n  };\n\n  // Função para exportar para CSV\n  const exportarCSV = () => {\n    const cabecalho = ['CNPJ', 'Empresa', 'Total de Dívidas (R$)', 'Qtd. Dívidas', 'Próximo Vencimento', 'Situação'];\n    \n    const linhas = clientesAgrupados.map(cliente => [\n      cliente.cnpj,\n      `\"${cliente.empresa.replace(/\"/g, '\"\"')}\"`,\n      cliente.total_dividas.replace('.', ','),\n      cliente.qtd_dividas,\n      cliente.proximo_vencimento,\n      `\"${cliente.situacao_consolidada.replace(/\"/g, '\"\"')}\"`\n    ].join(','));\n    \n    const conteudoCSV = [cabecalho.join(','), ...linhas].join('\\n');\n    const blob = new Blob([conteudoCSV], { type: 'text/csv;charset=utf-8;' });\n    \n    // Cria link para download\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `clientes_dividas_mes_${new Date().toLocaleDateString('pt-BR').replace(/\\//g, '-')}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  if (!show) return null;\n\n  return (\n    <>\n      <div className=\"modal show d-block\" tabIndex=\"-1\">\n        <div className=\"modal-dialog modal-lg\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h5 className=\"modal-title\">Clientes com Dívidas no Mês Atual</h5>\n              <button type=\"button\" className=\"btn-close\" onClick={handleClose}></button>\n              \n            </div>\n            <div className=\"modal-body\">\n              {clientesAgrupados.length === 0 ? (\n                <div className=\"alert alert-info\">\n                  Não há clientes com dívidas para o mês atual.\n                </div>\n              ) : (\n                <>\n                  <div className=\"alert alert-warning\">\n                    <i className=\"fas fa-exclamation-triangle me-2\"></i>\n                    Encontrados {clientesAgrupados.length} clientes com dívidas para o mês atual.\n                  </div>\n                  <div className=\"table-responsive\">\n                    <table className=\"table table-striped table-hover\">\n                      <thead>\n                        <tr>\n                          <th style={{width: \"40px\"}}></th>\n                          <th>CNPJ</th>\n                          <th>Empresa</th>\n                          <th>Total</th>\n                          <th>Qtd. Dívidas</th>\n                          <th>Próximo Venc.</th>\n                          <th>Situação</th>\n                          <th>Ações</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {clientesAgrupados.map((cliente) => (\n                          <React.Fragment key={cliente.cnpj}>\n                            <tr className={getSituacaoClass(cliente.situacao_consolidada)}>\n                              <td>\n                                <button \n                                  className=\"btn btn-sm btn-link\" \n                                  onClick={() => toggleExpand(cliente.cnpj)}\n                                >\n                                  <i className={`fas fa-${expandedRows[cliente.cnpj] ? 'minus' : 'plus'}-circle`}></i>\n                                </button>\n                              </td>\n                              <td>{cliente.cnpj}</td>\n                              <td>{cliente.empresa}</td>\n                              <td className=\"text-end\">\n                                {new Intl.NumberFormat('pt-BR', {\n                                  style: 'currency',\n                                  currency: 'BRL'\n                                }).format(cliente.total_dividas)}\n                              </td>\n                              <td className=\"text-center\">{cliente.qtd_dividas}</td>\n                              <td>{cliente.proximo_vencimento}</td>\n                              <td>{cliente.situacao_consolidada}</td>\n                              <td>\n                                <div className=\"btn-group\">\n                                  {emailsEnviados[cliente.cnpj] ? (\n                                    <>\n                                      <button \n                                        className=\"btn btn-sm btn-success\"\n                                        title={`E-mail enviado para ${emailsEnviados[cliente.cnpj].destinatario || 'cliente'}`}\n                                        disabled\n                                      >\n                                        <i className=\"fas fa-check\"></i>\n                                      </button>\n                                      <button \n                                        className=\"btn btn-sm btn-outline-secondary\"\n                                        onClick={() => reverterStatusEmail(cliente.cnpj)}\n                                        title=\"Reverter status de e-mail\"\n                                      >\n                                        <i className=\"fas fa-undo\"></i>\n                                      </button>\n                                    </>\n                                  ) : (\n                                    <button \n                                      className=\"btn btn-sm btn-primary\"\n                                      onClick={() => handlePrepareEmail(cliente)}\n                                      title=\"Enviar e-mail de cobrança\"\n                                    >\n                                      <i className=\"fas fa-envelope\"></i>\n                                    </button>\n                                  )}\n                                </div>\n                              </td>\n                            </tr>\n                            \n                            {/* Detalhes expandidos */}\n                            {expandedRows[cliente.cnpj] && (\n                              <tr>\n                                <td colSpan=\"8\" className=\"p-0\">\n                                  <div className=\"p-3 bg-light\">\n                                    <h6>Detalhes das Dívidas</h6>\n                                    <table className=\"table table-sm\">\n                                      <thead>\n                                        <tr>\n                                          <th>Código</th>\n                                          <th>Período</th>\n                                          <th>Valor</th>\n                                          <th>Vencimento</th>\n                                          <th>Situação</th>\n                                        </tr>\n                                      </thead>\n                                      <tbody>\n                                        {cliente.dividas.map((divida, idx) => (\n                                          <tr key={idx} className={getSituacaoClass(divida.situacao)}>\n                                            <td>{divida.codigo}</td>\n                                            <td>{divida.periodo}</td>\n                                            <td className=\"text-end\">\n                                              {new Intl.NumberFormat('pt-BR', {\n                                                style: 'currency',\n                                                currency: 'BRL'\n                                              }).format(divida.saldo_devedor)}\n                                            </td>\n                                            <td>{divida.vencimento}</td>\n                                            <td>{divida.situacao}</td>\n                                          </tr>\n                                        ))}\n                                      </tbody>\n                                    </table>\n                                    {emailsEnviados[cliente.cnpj] && (\n                                      <div className=\"alert alert-success mt-3\">\n                                        <i className=\"fas fa-check-circle me-2\"></i>\n                                        <small>\n                                          E-mail enviado para {emailsEnviados[cliente.cnpj].destinatario} em {new Date(emailsEnviados[cliente.cnpj].data).toLocaleDateString('pt-BR', {hour: '2-digit', minute: '2-digit'})}\n                                          {emailsEnviados[cliente.cnpj].email_copia && \n                                            <span> (CC: {emailsEnviados[cliente.cnpj].email_copia})</span>\n                                          }\n                                        </small>\n                                      </div>\n                                    )}\n                                  </div>\n                                </td>\n                              </tr>\n                            )}\n                          </React.Fragment>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                </>\n              )}\n            </div>\n            <div className=\"modal-footer\">\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={handleClose}>Fechar</button>\n              {clientesAgrupados.length > 0 && (\n                <button type=\"button\" className=\"btn btn-primary\" onClick={exportarCSV}>\n                  <i className=\"fas fa-download me-2\"></i>\n                  Exportar CSV\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n        <div className=\"modal-backdrop show\" onClick={handleClose}></div>\n      </div>\n      \n      {/* Modal para visualizar e enviar e-mail */}\n      {showEmailModal && (\n        <EmailPreviewModal \n          show={showEmailModal}\n          handleClose={handleCloseEmailModal}\n          emailData={selectedClienteEmail}\n          handleSendEmail={handleSendEmail}\n        />\n      )}\n    </>\n  );\n};\n\nconst Dividas = () => {\n  const [dividas, setDividas] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [atualizando, setAtualizando] = useState(false);\n  const [processamentoInfo, setProcessamentoInfo] = useState(null);\n\n  // Estados para filtros\n  const [filters, setFilters] = useState({});\n  const [searchTerm, setSearchTerm] = useState('');\n  const [activeFilterColumn, setActiveFilterColumn] = useState(null);\n  const [showModalDividasMes, setShowModalDividasMes] = useState(false);\n\n  // Mapeamento para nomes mais amigáveis das colunas\n  const columnNames = {\n    'cnpj': 'CNPJ',\n    'empresa': 'Empresa',\n    'codigo': 'Código',\n    'periodo': 'Período',\n    'vencimento': 'Vencimento',\n    'valor_original': 'Valor Original',\n    'saldo_devedor': 'Saldo Devedor',\n    'situacao': 'Situação',\n    'data_emissao': 'Data de Emissão',\n    'data_validade': 'Data de Validade',\n    'total_dividas': 'Total de Dívidas',\n    'data_registro': 'Data de Registro'\n  };\n\n  const columnsToShow = [\n    'cnpj', \n    'empresa', \n    'codigo', \n    'periodo', \n    'vencimento', \n    'valor_original', \n    'saldo_devedor', \n    'situacao', \n    'data_emissao', \n    'data_validade', \n    'total_dividas', \n    'data_registro'\n  ];\n\n  // Função para atualizar dados (processar PDFs)\n  const atualizarDados = async () => {\n    try {\n      setAtualizando(true);\n      setProcessamentoInfo(null);\n      \n      // Obter token de autenticação\n      const token = localStorage.getItem('access');\n      \n      // Chamar endpoint para processar PDFs\n      const response = await axios.post(\n        `${process.env.REACT_APP_API_BASE}/api/processar-pdfs/`, \n        {},  // corpo vazio\n        {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n\n      // Verificar resposta\n      if (response.data.success) {\n        // Armazenar informações do processamento\n        setProcessamentoInfo({\n          total: response.data.total_processados,\n          semDivida: response.data.pdfs_sem_divida,\n          comDivida: response.data.pdfs_com_divida,\n          comErro: response.data.pdfs_com_erro\n        });\n        \n        // Mostrar toast de sucesso\n        toast.success(`Processamento concluído com sucesso!`);\n\n        // Atualizar lista de dívidas\n        const dividasResponse = await axios.get(\n          `${process.env.REACT_APP_API_BASE}/api/dividas/`, \n          {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          }\n        );\n\n        if (dividasResponse.data.success) {\n          setDividas(dividasResponse.data.dividas);\n        }\n      } else {\n        // Mostrar erro\n        toast.error('Erro no processamento: ' + response.data.error);\n      }\n    } catch (error) {\n      console.error('Erro na atualização:', error);\n      toast.error('Erro ao atualizar dados: ' + (error.response?.data?.error || error.message));\n    } finally {\n      setAtualizando(false);\n    }\n  };\n\n  // Buscar dados\n  useEffect(() => {\n    const fetchDividas = async () => {\n      try {\n        const token = localStorage.getItem('access');\n        const response = await axios.get(`${process.env.REACT_APP_API_BASE}/api/dividas/`, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        });\n\n        if (response.data.success) {\n          setDividas(response.data.dividas);\n          setLoading(false);\n        }\n      } catch (err) {\n        setError(err.message);\n        setLoading(false);\n      }\n    };\n\n    fetchDividas();\n  }, []);\n\n  // Fechar o dropdown quando clicar fora\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      if (activeFilterColumn && !e.target.closest('.filter-dropdown')) {\n        setActiveFilterColumn(null);\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside);\n    return () => document.removeEventListener('click', handleClickOutside);\n  }, [activeFilterColumn]);\n\n  // Formatação de moeda\n  const formatCurrency = (value) => {\n    if (value === null || value === undefined || value === '') return '-';\n    return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value);\n  };\n\n  // Filtrar dados\n  const filteredDividas = useMemo(() => {\n    let result = dividas;\n\n    // Filtro de busca global\n    if (searchTerm) {\n      result = result.filter(divida => \n        Object.values(divida).some(val => \n          String(val).toLowerCase().includes(searchTerm.toLowerCase())\n        )\n      );\n    }\n\n    // Filtros específicos por coluna\n    Object.keys(filters).forEach(key => {\n      if (filters[key]) {\n        result = result.filter(divida => \n          String(divida[key]).toLowerCase().includes(filters[key].toLowerCase())\n        );\n      }\n    });\n\n    return result;\n  }, [dividas, filters, searchTerm]);\n\n  // Toggle filter dropdown\n  const toggleFilterDropdown = (column, e) => {\n    e.stopPropagation();\n    setActiveFilterColumn(activeFilterColumn === column ? null : column);\n  };\n\n  // Renderização de filtros\n  const renderColumnFilter = (column) => {\n    return (\n      <div className={`filter-dropdown-menu ${activeFilterColumn === column ? 'show' : ''}`}>\n        <div className=\"p-2\">\n          <input\n            type=\"text\"\n            className=\"form-control form-control-sm mb-2\"\n            placeholder=\"Filtrar...\"\n            value={filters[column] || ''}\n            onChange={(e) => setFilters(prev => ({\n              ...prev,\n              [column]: e.target.value\n            }))}\n            onClick={(e) => e.stopPropagation()}\n          />\n          <div className=\"filter-options\">\n            <button \n              className=\"btn btn-sm btn-outline-primary w-100 mb-2\"\n              onClick={(e) => {\n                e.stopPropagation();\n                setFilters(prev => {\n                  const newFilters = {...prev};\n                  delete newFilters[column];\n                  return newFilters;\n                });\n              }}\n            >\n              Limpar Filtro\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  if (loading) return (\n    <div className=\"d-flex justify-content-center my-5\">\n      <div className=\"spinner-border text-primary\" role=\"status\">\n        <span className=\"visually-hidden\">Carregando...</span>\n      </div>\n    </div>\n  );\n  \n  if (error) return (\n    <div className=\"alert alert-danger my-4\" role=\"alert\">\n      <h4 className=\"alert-heading\">Erro!</h4>\n      <p>{error}</p>\n    </div>\n  );\n\n  return (\n    <div className=\"container-fluid mt-4\">\n      <ToastContainer position=\"top-right\" autoClose={5000} />\n\n      <div className=\"header-wrapper position-relative\">\n        <i className=\"fas fa-file-invoice-dollar header-icon\"></i>\n        <h3 className=\"titulo-pagina\">Pendências Fiscais</h3>\n      </div>\n\n      {/* Botões de ação */}\n      <div className=\"row mb-3\">\n        <div className=\"col-md-12 d-flex gap-3\">\n          {/* Botão para atualizar dados */}\n          <button \n            className=\"btn btn-success mb-3\" \n            onClick={atualizarDados}\n            disabled={atualizando}\n          >\n            {atualizando ? (\n              <>\n                <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\n                Processando PDFs...\n              </>\n            ) : (\n              <>\n                <i className=\"fas fa-sync me-2\"></i>\n                Atualizar Dados\n              </>\n            )}\n          </button>\n\n          {/* Botão para mostrar dívidas do mês atual */}\n          <button \n            className=\"btn btn-warning mb-3\"\n            onClick={() => setShowModalDividasMes(true)}\n          >\n            <i className=\"fas fa-calendar-day me-2\"></i>\n            Clientes com Dívidas neste Mês\n          </button>\n        </div>\n      </div>\n\n      {/* Informações do último processamento */}\n      {processamentoInfo && (\n        <div className=\"alert alert-info\">\n          <i className=\"fas fa-info-circle me-2\"></i>\n          <strong>Resultado do processamento:</strong> \n          <span className=\"ms-2\">Total de PDFs processados: {processamentoInfo.total}</span>\n          <span className=\"ms-2\">|</span>\n          <span className=\"ms-2\">Sem dívidas: {processamentoInfo.semDivida}</span>\n          <span className=\"ms-2\">|</span>\n          <span className=\"ms-2\">Com dívidas: {processamentoInfo.comDivida}</span>\n          <span className=\"ms-2\">|</span>\n          <span className=\"ms-2\">Com erro: {processamentoInfo.comErro}</span>\n        </div>\n      )}\n\n      {/* Barra de Pesquisa Global */}\n      <div className=\"row mb-3\">\n        <div className=\"col-md-6\">\n          <div className=\"input-group\">\n            <span className=\"input-group-text\"><i className=\"fas fa-search\"></i></span>\n            <input \n              type=\"text\" \n              className=\"form-control\" \n              placeholder=\"Busca global...\" \n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            {searchTerm && (\n              <button \n                className=\"btn btn-outline-secondary\" \n                type=\"button\"\n                onClick={() => setSearchTerm('')}\n              >\n                <i className=\"fas fa-times\"></i>\n              </button>\n            )}\n          </div>\n        </div>\n        \n        {/* Indicadores de filtros ativos */}\n        <div className=\"col-md-6\">\n          <div className=\"d-flex justify-content-end align-items-center\">\n            {Object.keys(filters).length > 0 && (\n              <div className=\"active-filters\">\n                <small className=\"text-muted me-2\">Filtros ativos:</small>\n                {Object.keys(filters).map(key => (\n                  <span key={key} className=\"badge bg-info text-dark me-1\">\n                    {columnNames[key]}: {filters[key]}\n                    <button \n                      className=\"btn-close btn-close-white ms-1\" \n                      style={{ fontSize: '0.5rem' }}\n                      onClick={() => setFilters(prev => {\n                        const newFilters = {...prev};\n                        delete newFilters[key];\n                        return newFilters;\n                      })}\n                    ></button>\n                  </span>\n                ))}\n                <button \n                  className=\"btn btn-sm btn-outline-secondary ms-2\"\n                  onClick={() => setFilters({})}\n                >\n                  Limpar todos\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"card shadow\">\n        <div className=\"card-body\">\n          <div className=\"table-responsive\">\n            <table className=\"table table-hover table-striped\">\n              <thead>\n                <tr>\n                  {columnsToShow.map((column) => (\n                    <th key={column} className=\"text-center column-header\">\n                      <div className=\"d-flex align-items-center justify-content-center column-title\">\n                        <span>{columnNames[column] || column}</span>\n                        <button \n                          className=\"filter-icon-btn ms-1\" \n                          onClick={(e) => toggleFilterDropdown(column, e)}\n                          title={`Filtrar por ${columnNames[column] || column}`}\n                        >\n                          <i className={`fas fa-filter ${filters[column] ? 'text-primary' : 'text-muted'}`}></i>\n                        </button>\n                        {renderColumnFilter(column)}\n                      </div>\n                    </th>\n                  ))}\n                </tr>\n              </thead>\n              <tbody>\n                {filteredDividas.length === 0 ? (\n                  <tr>\n                    <td colSpan={columnsToShow.length} className=\"text-center\">\n                      Nenhuma dívida encontrada\n                    </td>\n                  </tr>\n                ) : (\n                  filteredDividas.map((divida, index) => (\n                    <tr key={index}>\n                      {columnsToShow.map((key) => (\n                        <td \n                          key={key} \n                          className={`\n                            text-center \n                            ${key === 'situacao' ? getSituacaoClass(divida.situacao) : ''} \n                            ${isCurrencyColumn(key) ? 'text-end' : ''}\n                          `}\n                        >\n                          {isCurrencyColumn(key) ? \n                            formatCurrency(divida[key]) : \n                            (divida[key] || '-')}\n                        </td>\n                      ))}\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <div className=\"card-footer\">\n          <div className=\"d-flex justify-content-between\">\n            <small className=\"text-muted\">Total de registros: {filteredDividas.length}</small>\n            <small className=\"text-muted\">\n              Última atualização: {dividas.length > 0 ? dividas[0].data_consulta : '-'}\n            </small>\n          </div>\n        </div>\n      </div>\n\n      {/* Modal de clientes com dívidas neste mês */}\n      <ClientesComDividaMes \n        show={showModalDividasMes} \n        handleClose={() => setShowModalDividasMes(false)} \n        dividas={dividas} \n      />\n    </div>\n  );\n};\n\n// Funções de classificação\nconst getSituacaoClass = (situacao) => {\n  if (!situacao) return '';\n  \n  const situacaoLowerCase = situacao.toLowerCase();\n  \n  if (situacaoLowerCase.includes('sem divida') || situacaoLowerCase.includes('confirmado')) {\n    return 'table-success';\n  } else if (situacaoLowerCase.includes('a vencer') || situacaoLowerCase.includes('analisar')) {\n    return 'table-warning';\n  } else if (situacaoLowerCase.includes('devedor')) {\n    return 'table-danger';\n  }\n  \n  return '';\n};\n\nconst isCurrencyColumn = (columnName) => {\n  return ['valor_original', 'saldo_devedor', 'total_dividas'].includes(columnName);\n};\n\nexport default Dividas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}